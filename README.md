The goal of the project is to implement node2vec algorithm. This code implements the first part provide implementation by scratch for the first part. The skip-gram part is imported. The code below presents full example of workflow. The main function is generate_corpus that works like:
1. Generate n paths.
2. Each path is generated by sampling a node, then choosing the first hop, then generating k-1 hops.


```julia
using Graphs, Random, SparseArrays, Word2Vec, OSMToolset,Distributions, DataFrames, CSV, Word2Vec
include("../OSMXGraph.jl/src/OSMXGraph.jl")
include("node2vec.jl")
using .OSMXGraph
```

    WARNING: replacing module OSMXGraph.
    WARNING: replacing module OSMXGraph.



```julia
dir_in = "data"
dir_out = "graph_data"
road_types = ["motorway", "trunk", "primary", "secondary", 
            "tertiary", "residential", "service", "living_street", 
            "motorway_link", "trunk_link", "primary_link", "secondary_link", 
            "tertiary_link"]
```


    13-element Vector{String}:
     "motorway"
     "trunk"
     "primary"
     "secondary"
     "tertiary"
     "residential"
     "service"
     "living_street"
     "motorway_link"
     "trunk_link"
     "primary_link"
     "secondary_link"
     "tertiary_link"



```julia
df, sparse_index, road_index, node_ids = OSMXGraph.create_road_graph("Ochota.osm", road_types,"Ochota_graph.csv","Ochota_nodes.json",dir_in=dir_in,dir_out=dir_out)
```


    ([1m16041Ã—9 DataFrame[0m
    [1m   Row [0mâ”‚[1m id    [0m[1m from_id [0m[1m to_id [0m[1m from        [0m[1m to          [0m[1m from_LLA            [0m â‹¯
           â”‚[90m Int64 [0m[90m Int64   [0m[90m Int64 [0m[90m Int64       [0m[90m Int64       [0m[90m String              [0m â‹¯
    â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
         1 â”‚     1     1984   1983   1949648310   9265228166  OpenStreetMapX.LLA(5 â‹¯
         2 â”‚     2     1983   1984   9265228166   1949648310  OpenStreetMapX.LLA(5
         3 â”‚     3     6218   3505  10061787376   4737816385  OpenStreetMapX.LLA(5
         4 â”‚     4     3505   6218   4737816385  10061787376  OpenStreetMapX.LLA(5
         5 â”‚     5     3507   6218   4737816383  10061787376  OpenStreetMapX.LLA(5 â‹¯
         6 â”‚     6     6218   3507  10061787376   4737816383  OpenStreetMapX.LLA(5
         7 â”‚     7     3506   3507   4737816384   4737816383  OpenStreetMapX.LLA(5
         8 â”‚     8     3507   3506   4737816383   4737816384  OpenStreetMapX.LLA(5
       â‹®   â”‚   â‹®       â‹®       â‹®         â‹®            â‹®                       â‹®    â‹±
     16035 â”‚ 16035     8037   8036  12467212838  12467212836  OpenStreetMapX.LLA(5 â‹¯
     16036 â”‚ 16036     1018   3578    302913213    302913215  OpenStreetMapX.LLA(5
     16037 â”‚ 16037     3578   1018    302913215    302913213  OpenStreetMapX.LLA(5
     16038 â”‚ 16038     5558   5560   9264715225   9264715235  OpenStreetMapX.LLA(5
     16039 â”‚ 16039     5560   5558   9264715235   9264715225  OpenStreetMapX.LLA(5 â‹¯
     16040 â”‚ 16040     5561   5558   9264715241   9264715225  OpenStreetMapX.LLA(5
     16041 â”‚ 16041     5558   5561   9264715225   9264715241  OpenStreetMapX.LLA(5
    [36m                                                4 columns and 16026 rows omitted[0m, sparse([2, 58, 1, 4, 4431, 6446, 3, 670, 1959, 1806  â€¦  3769, 3814, 3758, 3985, 3988, 6790, 1137, 1139, 5274, 5177], [1, 1, 2, 3, 3, 3, 4, 4, 4, 5  â€¦  8103, 8103, 8104, 8104, 8104, 8106, 8107, 8107, 8107, 8108], [5111, 3569, 5112, 15462, 12638, 5878, 15463, 3941, 5330, 4487  â€¦  6954, 10511, 15675, 2054, 15674, 14058, 2687, 3217, 3216, 9447], 8108, 8108), NearestNeighbors.KDTree{StaticArraysCore.SVector{2, Float64}, Distances.Euclidean, Float64, StaticArraysCore.SVector{2, Float64}}
      Number of points: 8108
      Dimensions: 2
      Metric: Distances.Euclidean(0.0)
      Reordered: false, [3956, 5157, 4846, 900, 4640, 6039, 3725, 7009, 2937, 2608  â€¦  1506, 654, 5792, 204, 2596, 569, 1375, 3283, 6348, 5426])



```julia
corp = generate_corpus(10,5,sparse_index,0.3,0.4)
```


    10Ã—5 Matrix{Int64}:
       41  5982   122   121   673
     5149  5150  7357  5148  5147
     3250  3251  1145  3245  3244
      545   686  1930     0     0
     7010  7009  7010  7009  7010
     4739  7488  4739  7488  4739
     6121  2559  6125   279  6125
     3704  3701  3704  3542  3704
     3260  3244  3245  3259  1146
     6310  6309  6310  6309   349



```julia
open("walks.txt", "w") do io
    for walk in eachrow(corp)
        println(io, join(string.(walk), ' '))
    end
end
```


```julia
model = word2vec("walks.txt","out.bin", cbow = 0)
```

    Starting training using file walks.txt
    Vocab size: 1
    Words in train file: 10



    Process(`[4m/home/adamkas/.julia/artifacts/0c86f7feb8f6b4ab5f9fb793f1fde1278e3a6021/bin/word2vec[24m [4m-train[24m [4mwalks.txt[24m [4m-output[24m [4mout.bin[24m [4m-size[24m [4m100[24m [4m-window[24m [4m5[24m [4m-sample[24m [4m0.001[24m [4m-hs[24m [4m0[24m [4m-negative[24m [4m5[24m [4m-threads[24m [4m12[24m [4m-iter[24m [4m5[24m [4m-min-count[24m [4m5[24m [4m-alpha[24m [4m0.025[24m [4m-debug[24m [4m2[24m [4m-binary[24m [4m0[24m [4m-cbow[24m [4m0[24m`, ProcessExited(0))

